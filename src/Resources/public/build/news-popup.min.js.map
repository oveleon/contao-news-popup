{
  "version": 3,
  "sources": ["../src/helper/extend.js", "../src/NewsPopup.js"],
  "sourcesContent": ["export function extend() {\r\n    var obj, name, copy,\r\n        target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length;\r\n\r\n    for (; i < length; i++) {\r\n        if ((obj = arguments[i]) !== null) {\r\n            for (name in obj) {\r\n                copy = obj[name];\r\n\r\n                if (target === copy) {\r\n                    continue;\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}", "import {extend} from \"./helper/extend\";\r\n\r\nclass NewsPopup {\r\n\r\n    constructor(popup, options) {\r\n        this.options = extend({\r\n            closeButton: null,\r\n            delay: 0,\r\n            storage: {\r\n                mode: 'local',              // local, database\r\n                key: 'cnp',\r\n                data: null                  // Must be passed if the mode is set to database\r\n            },\r\n            onOpen: () => {},\r\n            onClose: () => {}\r\n        }, options || {})\r\n\r\n        this.popup = popup\r\n        this.storage = this.#getStorage()\r\n\r\n        this.#registerEvents()\r\n\r\n        if(!this.storage?.hasOwnProperty(this.currentId)) {\r\n            setTimeout(()=>{\r\n                this.open()\r\n            }, this.options.delay)\r\n        }\r\n    }\r\n\r\n    #registerEvents(){\r\n        // Close button event\r\n        if(!!this.options.closeButton){\r\n            this.options.closeButton.addEventListener('click', () => {\r\n                this.close(true)\r\n            })\r\n        }\r\n\r\n        // Click link event\r\n        let item = document.querySelector('[data-np-id]');\r\n\r\n        if(!!item){\r\n            this.currentId = item?.dataset?.npId;\r\n\r\n            item.querySelectorAll('a').forEach((el) => {\r\n                el.addEventListener('click', () => { this.#save() });\r\n            })\r\n        }\r\n    }\r\n\r\n    #save(){\r\n        if(!this.currentId) return;\r\n\r\n        if(!this.storage){\r\n            this.storage = {}\r\n        }\r\n\r\n        this.storage[ this.currentId ] = {\r\n            id: this.currentId,\r\n            date: new Date()\r\n        };\r\n\r\n        localStorage.setItem(this.options.storage.key, JSON.stringify(this.storage));\r\n    }\r\n\r\n    #getStorage(){\r\n        switch (this.options.storage.mode){\r\n            case 'local':\r\n                return JSON.parse(localStorage.getItem(this.options.storage.key))\r\n            case 'database':\r\n                return this.options.storage.data\r\n        }\r\n    }\r\n\r\n    open(){\r\n        this.popup.classList.add('open')\r\n        this.options.onOpen.call(this)\r\n    }\r\n\r\n    close(persist){\r\n\r\n        if(!!persist){\r\n            this.#save()\r\n        }\r\n\r\n        this.popup.classList.remove('open')\r\n        this.options.onClose.call(this)\r\n    }\r\n}\r\n\r\nmodule.exports = NewsPopup"],
  "mappings": "yWAAO,YAAkB,CAMrB,OALI,GAAK,EAAM,EACX,EAAS,UAAU,IAAM,GACzB,EAAI,EACJ,EAAS,UAAU,OAEhB,EAAI,EAAQ,IACf,GAAK,GAAM,UAAU,MAAQ,KACzB,IAAK,IAAQ,GAGT,AAFA,EAAO,EAAI,GAEP,IAAW,GAEJ,IAAS,QAChB,GAAO,GAAQ,GAK/B,MAAO,GAnBX,gBCAA,oCAEA,OAAgB,CAEZ,YAAY,EAAO,EAAS,CAyB5B,UAoBA,UAeA,UAhEJ,MAKQ,KAAK,QAAU,EAAO,CAClB,YAAa,KACb,MAAO,EACP,QAAS,CACL,KAAM,QACN,IAAK,MACL,KAAM,MAEV,OAAQ,IAAM,GACd,QAAS,IAAM,IAChB,GAAW,IAEd,KAAK,MAAQ,EACb,KAAK,QAAU,OAAK,KAAL,WAEf,OAAK,KAAL,WAEI,SAAK,UAAL,cAAc,eAAe,KAAK,aAClC,WAAW,IAAI,CACX,KAAK,QACN,KAAK,QAAQ,OAgDxB,MAAM,CACF,KAAK,MAAM,UAAU,IAAI,QACzB,KAAK,QAAQ,OAAO,KAAK,MAG7B,MAAM,EAAQ,CAEV,AAAK,GACD,OAAK,KAAL,WAGJ,KAAK,MAAM,UAAU,OAAO,QAC5B,KAAK,QAAQ,QAAQ,KAAK,QAxD9B,gBAAe,UAAE,CA7BrB,MA+BQ,AAAK,KAAK,QAAQ,aACd,KAAK,QAAQ,YAAY,iBAAiB,QAAS,IAAM,CACrD,KAAK,MAAM,MAKnB,GAAI,GAAO,SAAS,cAAc,gBAElC,AAAK,GACD,MAAK,UAAY,oBAAM,UAAN,cAAe,KAEhC,EAAK,iBAAiB,KAAK,QAAQ,AAAC,GAAO,CACvC,EAAG,iBAAiB,QAAS,IAAM,CAAE,OAAK,KAAL,iBAKjD,gBAAK,UAAE,CACH,AAAG,CAAC,KAAK,WAEL,MAAK,SACL,MAAK,QAAU,IAGnB,KAAK,QAAS,KAAK,WAAc,CAC7B,GAAI,KAAK,UACT,KAAM,GAAI,OAGd,aAAa,QAAQ,KAAK,QAAQ,QAAQ,IAAK,KAAK,UAAU,KAAK,YAGvE,gBAAW,UAAE,CACT,OAAQ,KAAK,QAAQ,QAAQ,UACpB,QACD,MAAO,MAAK,MAAM,aAAa,QAAQ,KAAK,QAAQ,QAAQ,UAC3D,WACD,MAAO,MAAK,QAAQ,QAAQ,OAoB5C,EAAO,QAAU",
  "names": []
}
